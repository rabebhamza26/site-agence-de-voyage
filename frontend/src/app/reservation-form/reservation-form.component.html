<div class="container mt-4">
  <div class="mb-3">
    <a routerLink="/dashboardAdmin" class="btn btn-primary">
      <i class="bi bi-arrow-left-circle me-1"></i> Retour
    </a>
  </div>

  <h2 class="text-center mb-4 text-primary fw-bold">üìå Gestion des r√©servations</h2>

  <form [formGroup]="reservationForm" (ngSubmit)="submit()" class="shadow p-4 rounded bg-light mb-4">
    <div class="row g-3">
      <div class="col-md-6">
        <label>Nom Client</label>
        <input type="text" formControlName="nomClient" class="form-control" />
      </div>
      <div class="col-md-6">
        <label>Email</label>
        <input type="email" formControlName="email" class="form-control" />
      </div>
      <div class="col-md-6">
        <label>Agence</label>
        <input type="text" formControlName="nomAgence" class="form-control" />
      </div>
      <div class="col-md-6">
        <label>T√©l√©phone</label>
        <input type="text" formControlName="numeroTelephone" class="form-control" />
      </div>
      <div class="col-md-6">
        <label>Date D√©but</label>
        <input type="date" formControlName="dateDebutReservation" class="form-control" />
      </div>
      <div class="col-md-6">
        <label>Date Fin</label>
        <input type="date" formControlName="dateFinReservation" class="form-control" />
      </div>
      <div class="col-md-6">
        <label>Heure D√©but</label>
        <input type="time" formControlName="heureDebutReservation" class="form-control" />
      </div>
      <div class="col-md-6">
        <label>Heure Fin</label>
        <input type="time" formControlName="heureFinReservation" class="form-control" />
      </div>
    </div>

    <div class="text-center mt-4">
      <button class="btn btn-success me-2" type="submit">
        {{ editingReservationId ? 'Modifier' : 'Cr√©er' }} la R√©servation
      </button>
      <button class="btn btn-secondary" type="button" (click)="reservationForm.reset()">R√©initialiser</button>
    </div>
  </form>

  <!-- Liste des r√©servations -->
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-hover table-striped align-middle text-center">
      <thead class="table-primary">
        <tr>
          <th>Nom</th>
          <th>Email</th>
          <th>Agence</th>
          <th>T√©l√©phone</th>
          <th>Date D√©but</th>
          <th>Date Fin</th>
          <th>Heure D√©but</th>
          <th>Heure Fin</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let res of reservations">
          <td>{{ res.nomClient }}</td>
          <td>{{ res.email }}</td>
          <td>{{ res.nomAgence }}</td>
          <td>{{ res.numeroTelephone }}</td>
          <td>{{ res.dateDebutReservation | date: 'shortDate' }}</td>
          <td>{{ res.dateFinReservation | date: 'shortDate' }}</td>
          <td>{{ res.heureDebutReservation }}</td>
          <td>{{ res.heureFinReservation }}</td>
          <td>
            <span class="badge"
              [ngClass]="{
                'bg-warning text-dark': res.statut === 'En attente',
                'bg-success': res.statut === 'Confirm√©e',
                'bg-danger': res.statut === 'Annul√©e'
              }">
              {{ res.statut }}
            </span>
          </td>
          <td>
            <div class="btn-group">
              <button class="btn btn-sm btn-success" (click)="confirm(res)">
                <i class="bi bi-check-circle"></i>
              </button>
              <button class="btn btn-sm btn-warning text-dark" (click)="cancel(res)">
                <i class="bi bi-x-circle"></i>
              </button>
              <button class="btn btn-sm btn-info" (click)="edit(res)">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn btn-sm btn-danger" (click)="delete(res._id)">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
